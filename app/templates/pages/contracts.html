
<div class="main-section-content">
    <div class="contracts-list-wrapper">
        <div class="main-section-chapter-fieldset contracts-list-item"
             ng-click="goToContract(contract, $event)"
             ng-repeat="contract in contractsList" ng-init="iniContract(contract)">
            <div class="contract-name-block">
                <span class="contract-show-button">
                    <i ng-class="contractTypesIcons[contract.contract_type]"></i>
                </span>
                <div class="contract-name-text" ng-attr-title="{{contract.name}}">{{ contract.name || 'Not defined'}}</div>
            </div>
            <div class="clearfix show-ps"></div>
            <div class="contract-status-block">
                <div class="contract-status-buttons">

                <!-- Pay instruction button -->
                    <button ng-click="payContract(contract)"
                            ng-if="(statuses[contract.state]['value'] == 1) || (statuses[contract.state]['value'] == 2)"
                            class="btn btn-transparent hide-ps">
                        <span>Launch</span>
                    </button>

                    <!-- Deposit instruction button -->
                    <button ng-if="(statuses[contract.state]['value'] == 4) && (contract.contract_type != 4)"
                            ng-pop-up="{
                                template: '/templates/popups/deposit-instruction.html',
                                params: {
                                    contract: contract
                                },
                                actions: {
                                    successCodeCopy: successCodeCopy
                                },
                                onClose: returnToList
                            }"
                       class="btn btn-transparent hide-ps">
                        <span>Deposit</span>
                    </button>

                    <!-- Cancel instruction button -->
                    <button ng-if="(statuses[contract.state]['value'] == 4) && (contract.contract_type != 4)"
                            ng-pop-up="{
                                template: '/templates/popups/stop-instruction.html',
                                params: {
                                    contract: contract
                                },
                                actions: {
                                    successCodeCopy: successCodeCopy
                                },
                                onClose: returnToList
                            }"
                            class="btn btn-transparent hide-ps">
                        <span>Cancel</span>
                    </button>

                    <button ng-if="(statuses[contract.state]['value'] == 4) && (contract.contract_type == 4)"
                            ng-pop-up="{
                                template: '/templates/popups/finalize-instruction.html',
                                params: {
                                    contract: contract
                                },
                                actions: {
                                    successCodeCopy: successCodeCopy
                                },
                                onClose: returnToList
                            }"
                            class="btn btn-transparent hide-ps">
                        <span>Finalize</span>
                    </button>

                    <button class="btn only-icon"
                            ng-class="{'in-progress': timeoutsForProgress[contract.id]}"
                            ng-mousedown="refreshContract(contract)" ng-if="!((statuses[contract.state]['value'] == 6) || (statuses[contract.state]['value'] == 7))">
                        <img class="btn-icon refresh-icon" src="/static/images/refresher.svg">
                    </button>

                    <button class="btn only-icon" type="button"
                            ng-if="(statuses[contract.state]['value'] == 1) || (statuses[contract.state]['value'] == 2) || (statuses[contract.state]['value'] == 5) || (statuses[contract.state]['value'] == 6) || (statuses[contract.state]['value'] == 7)"
                            ng-pop-up="{
                                template: '/templates/popups/delete-contract.html',
                                params: contract,
                                class: 'deleting-contract',
                                actions: {
                                    deleteContract: deleteContract
                                }
                            }">
                        <i class="icon-trash"></i>
                    </button>



                </div>

                <div class="contract-status-name" ng-class="'contract-status-' + statuses[contract.state]['value']">
                    <div class="contract-status-text">
                        <span>{{statuses[contract.state]['title']}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
