<div ng-controller="crowdSaleAmountBonusesController">
    <div class="relative contract-form-fieldset with-padding"
         ng-repeat="bonus in bonuses">

        <div class="grid-row contract-form-row">
            <div class="grid-cell grid-cell-1-6 grid-cell-ps-1-4 grid-cell-vs-1-3">
                <div class="form-control">
                    <label class="form-control-label">Bonus</label>
                    <input class="form-control-input" type="number"
                           placeholder="50"
                           ng-change="createAmountBonusChartData()"
                           step="0.1" min="0.1" required ng-model="bonus.bonus"/>
                    <div class="input-after">%</div>
                </div>
            </div>
            <div class="grid-cell grid-cell-2-5 grid-cell-ps-3-5 grid-cell-vs-1 form-control-description">
                <div class="form-control-label hide-vs">&nbsp;</div>
                <span class="form-control-description__text">Usually 0.1-100%.  How many extra tokens will be sent to contributor.</span>
            </div>
        </div>
        <div class="grid-row contract-form-row">
            <div class="grid-cell grid-cell-2-5 grid-cell-ps-4-5 grid-cell-vs-1">
                <div class="form-control">
                    <label class="form-control-label">
                        Min Amount&nbsp;&nbsp;
                        <img src="/static/images/right-arrow.svg" alt="">
                    </label>
                    <input type="text"
                           placeholder="10"
                           ng-model="bonus.min_amount"
                           ng-change="createAmountBonusChartData()"
                           required
                           commaseparator="{regexp: '^(0|([1-9][0-9]{0,25})|(1[0]{26}))$', min: !$index ? '1' : bonuses[$index-1].max_amount, max: bigNumber(bonus.max_amount).minus('1')}"
                           class="form-control-input"/>
                    <div class="input-after">ETH</div>
                </div>
            </div>
            <div class="grid-cell grid-cell-3-5 grid-cell-ps-4-5 grid-cell-vs-1 form-control-description">
                <div class="form-control-label hide-ps">&nbsp;</div>
                <span class="form-control-description__text">
                            Minimum contribution for getting specified bonus
                        </span>
            </div>
        </div>
        <div class="grid-row contract-form-row">
            <div class="grid-cell grid-cell-2-5 grid-cell-ps-4-5 grid-cell-vs-1">
                <div class="form-control">
                    <label class="form-control-label">
                        <img src="/static/images/right-arrow.svg" alt="">&nbsp;&nbsp;
                        Max Amount
                    </label>
                    <input type="text"
                           ng-model="bonus.max_amount"
                           required
                           ng-change="createAmountBonusChartData()"
                           placeholder="1000"
                           commaseparator="{regexp: '^(0|([1-9][0-9]{0,25})|(1[0]{26}))$', min: bigNumber(bonus.min_amount).plus('1'), max: bigNumber(request.hard_cap).div(request.rate).floor()}"
                           class="form-control-input"/>
                    <div class="input-after">ETH</div>
                </div>
            </div>
            <div class="grid-cell grid-cell-3-5 grid-cell-ps-4-5 grid-cell-vs-1 form-control-description">
                <div class="form-control-label hide-ps">&nbsp;</div>
                <span class="form-control-description__text">
                            Maximum contribution for getting specified bonus (you can left it empty if there is no limit)
                        </span>
            </div>
        </div>

        <i class="icon-cancel float-right form-fieldset-info-button"
           ng-click="deleteAmountBonus(bonus)"
           ng-if="bonuses.length"></i>
    </div>
    <div class="contract-form-fieldset with-padding" ng-if="bonuses.length < 10">
        <div class="grid-row">
            <div class="grid-cell grid-cell-1-2 grid-cell-ls-1 float-right form-control-description" ng-if="!bonuses.length">
                <span class="form-control-description__text">You can define bonus depending on contribution Amount. For example, give extra 5% tokens for 10+ ETH contributions</span><br/>
            </div>
            <div class="grid-cell grid-cell-ls-1 form-control-description"
                 ng-class="{'grid-cell-1-2':!bonuses.length, 'grid-cell-1': bonuses.length}">
                <button class="btn btn-transparent with-icon mobile-width-100"
                        ng-disabled="!amountBonusForm.$valid"
                        type="button" ng-click="addAmountBonus();">
                    <i class="icon-create-contract"></i>
                    <span ng-if="!bonuses.length">Add Amount Bonus</span>
                    <span ng-if="bonuses.length">Add Other Amount Bonus</span>
                </button>
            </div>
        </div>
    </div>

    <div class="contract-form-fieldset contract-form-fieldset-grey with-padding" ng-if="amountBonusChartData.length && amountBonusForm.$valid">
        <div ng-bar-chart="{data: amountBonusChartData}"></div>
    </div>
</div>